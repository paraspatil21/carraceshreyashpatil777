<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Advanced 3D Racing Game by Shreyash Vaibhav Patil">
    <title>VelocityX Pro Racing</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            background: linear-gradient(135deg, #0a0a0a 0%, #0f172a 50%, #1e1b4b 100%);
            color: #fff;
            font-family: 'Segoe UI', 'Arial', sans-serif;
            overflow: hidden;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            position: relative;
        }

        /* Galaxy Background Effect */
        .galaxy-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(72, 219, 251, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(255, 107, 107, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(254, 202, 87, 0.1) 0%, transparent 50%);
            z-index: -2;
        }

        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(2px 2px at 20px 30px, #eee, transparent),
                radial-gradient(2px 2px at 40px 70px, #fff, transparent),
                radial-gradient(1px 1px at 90px 40px, #fff, transparent),
                radial-gradient(1px 1px at 130px 80px, #fff, transparent);
            background-repeat: repeat;
            background-size: 200px 200px;
            animation: twinkle 4s infinite alternate;
            z-index: -1;
        }

        @keyframes twinkle {
            0% { opacity: 0.3; }
            100% { opacity: 0.8; }
        }

        /* Game Start Screen */
        #gameStartScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, rgba(12, 36, 97, 0.9) 0%, rgba(0, 0, 0, 0.95) 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 100;
            padding: 20px;
            backdrop-filter: blur(5px);
        }

        .game-brand {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 30px;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .brand-logo {
            font-size: 5rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #ff6b6b, #feca57, #48dbfb, #ff9ff3);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(255, 255, 255, 0.2);
            filter: drop-shadow(0 5px 15px rgba(0, 0, 0, 0.3));
        }

        .brand-title {
            font-size: 3.5rem;
            font-weight: 800;
            letter-spacing: 3px;
            background: linear-gradient(90deg, #fff, #f8f9fa);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 5px;
            text-transform: uppercase;
            position: relative;
        }

        .brand-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 3px;
            background: linear-gradient(90deg, transparent, #48dbfb, transparent);
        }

        .brand-subtitle {
            font-size: 1.2rem;
            color: #94a3b8;
            margin-bottom: 30px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .creator-badge {
            background: linear-gradient(90deg, rgba(30, 41, 59, 0.8), rgba(15, 23, 42, 0.8));
            padding: 12px 25px;
            border-radius: 25px;
            margin-bottom: 40px;
            border: 1px solid rgba(100, 116, 139, 0.3);
            backdrop-filter: blur(10px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .creator-badge span {
            background: linear-gradient(90deg, #feca57, #ff9ff3);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .game-description {
            max-width: 600px;
            margin-bottom: 40px;
            line-height: 1.6;
            color: #cbd5e1;
            font-size: 1.1rem;
        }

        .game-features {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 40px;
            max-width: 500px;
        }

        .feature {
            background: rgba(30, 41, 59, 0.5);
            padding: 15px;
            border-radius: 15px;
            border: 1px solid rgba(100, 116, 139, 0.2);
            backdrop-filter: blur(5px);
        }

        .feature i {
            font-size: 1.5rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #48dbfb, #0ea5e9);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .gameButton {
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            border: none;
            padding: 18px 50px;
            font-size: 1.3rem;
            border-radius: 50px;
            color: white;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s;
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
            font-weight: 600;
            letter-spacing: 1px;
            text-transform: uppercase;
            position: relative;
            overflow: hidden;
        }

        .gameButton::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: 0.5s;
        }

        .gameButton:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(59, 130, 246, 0.6);
        }

        .gameButton:hover::before {
            left: 100%;
        }

        .gameButton:active {
            transform: translateY(2px);
        }

        /* Game Canvas with 3D effect */
        .game-container {
            position: relative;
            perspective: 1000px;
            display: none;
        }

        #gameCanvas {
            background: 
                linear-gradient(to bottom, #0f172a 0%, #1e293b 30%, #334155 100%);
            display: block;
            border-radius: 15px;
            box-shadow: 
                0 20px 50px rgba(0, 0, 0, 0.8),
                0 0 0 1px rgba(59, 130, 246, 0.2),
                0 0 0 3px rgba(15, 23, 42, 0.5);
            border: 1px solid #475569;
            transform-style: preserve-3d;
            transform: rotateX(5deg);
            position: relative;
            overflow: hidden;
        }

        /* 3D Road Effect */
        .road-perspective {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        /* Game HUD */
        .gameHUD {
            position: fixed;
            top: 20px;
            width: 90%;
            max-width: 900px;
            display: none;
            justify-content: space-between;
            background: rgba(15, 23, 42, 0.85);
            padding: 20px 30px;
            border-radius: 20px;
            border: 1px solid rgba(100, 116, 139, 0.3);
            backdrop-filter: blur(15px);
            z-index: 10;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .hudSection {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }

        .hudIcon {
            font-size: 1.5rem;
            margin-bottom: 8px;
            background: linear-gradient(90deg, #48dbfb, #3b82f6);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .hudLabel {
            font-size: 0.8rem;
            color: #94a3b8;
            margin-bottom: 5px;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            font-weight: 600;
        }

        .hudValue {
            font-size: 2rem;
            font-weight: 800;
            color: #fff;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        #speedValue {
            background: linear-gradient(90deg, #feca57, #f59e0b);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        #levelValue {
            background: linear-gradient(90deg, #48dbfb, #0ea5e9);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        #scoreValue {
            background: linear-gradient(90deg, #ff9ff3, #d946ef);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .fuel-container {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #fuelBarContainer {
            width: 180px;
            height: 12px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid rgba(100, 116, 139, 0.5);
            margin-top: 8px;
            position: relative;
        }

        #fuelBar {
            height: 100%;
            background: linear-gradient(90deg, #10b981, #22c55e);
            width: 100%;
            transition: width 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            border-radius: 10px;
            position: relative;
            overflow: hidden;
        }

        #fuelBar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 50%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        }

        /* Car Info Panel */
        .carInfo {
            position: fixed;
            bottom: 120px;
            left: 20px;
            background: rgba(15, 23, 42, 0.9);
            padding: 20px;
            border-radius: 15px;
            border-left: 5px solid #3b82f6;
            font-size: 0.9rem;
            max-width: 250px;
            display: none;
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(100, 116, 139, 0.3);
        }

        .carInfo h3 {
            color: #f1f5f9;
            margin-bottom: 10px;
            font-size: 1.2rem;
            background: linear-gradient(90deg, #3b82f6, #8b5cf6);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .carSpec {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            color: #cbd5e1;
        }

        .carSpec span:last-child {
            color: #feca57;
            font-weight: 600;
        }

        /* Controls */
        .controlsContainer {
            position: fixed;
            bottom: 30px;
            width: 100%;
            max-width: 600px;
            display: none;
            justify-content: space-between;
            align-items: center;
            padding: 0 30px;
        }

        .pedalButton {
            background: linear-gradient(180deg, #334155, #1e293b);
            width: 90px;
            height: 90px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.2rem;
            color: white;
            box-shadow: 
                0 10px 0 #0f172a,
                0 20px 30px rgba(0, 0, 0, 0.6);
            cursor: pointer;
            user-select: none;
            transition: all 0.15s;
            border: 3px solid #475569;
            position: relative;
            overflow: hidden;
        }

        .pedalButton::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, transparent 30%, rgba(255, 255, 255, 0.1) 100%);
        }

        .pedalButton:active {
            transform: translateY(10px);
            box-shadow: 0 0 0 #0f172a, 0 5px 15px rgba(0, 0, 0, 0.5);
        }

        #brakePedal {
            background: linear-gradient(180deg, #ef4444, #dc2626);
            border-color: #b91c1c;
        }

        #gasPedal {
            background: linear-gradient(180deg, #10b981, #059669);
            border-color: #065f46;
        }

        .arrowButtons {
            display: flex;
            gap: 25px;
        }

        .arrowButton {
            background: rgba(255, 255, 255, 0.1);
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: white;
            cursor: pointer;
            user-select: none;
            transition: all 0.2s;
            border: 2px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }

        .arrowButton:active {
            background: rgba(255, 255, 255, 0.25);
            transform: scale(0.92);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.3);
        }

        /* Notifications */
        .levelUpNotification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: rgba(15, 23, 42, 0.95);
            padding: 40px 60px;
            border-radius: 20px;
            border: 2px solid;
            border-image: linear-gradient(45deg, #48dbfb, #8b5cf6) 1;
            text-align: center;
            z-index: 50;
            display: none;
            backdrop-filter: blur(20px);
            box-shadow: 
                0 20px 60px rgba(72, 219, 251, 0.3),
                inset 0 0 0 1px rgba(255, 255, 255, 0.1);
            animation: notificationPop 0.5s forwards;
        }

        @keyframes notificationPop {
            0% { transform: translate(-50%, -50%) scale(0); }
            70% { transform: translate(-50%, -50%) scale(1.1); }
            100% { transform: translate(-50%, -50%) scale(1); }
        }

        .levelUpNotification h2 {
            font-size: 3rem;
            margin-bottom: 15px;
            background: linear-gradient(45deg, #48dbfb, #8b5cf6);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .levelUpNotification p {
            color: #e2e8f0;
            font-size: 1.3rem;
            margin-bottom: 10px;
        }

        /* Game Over Screen */
        .gameOverScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, rgba(15, 23, 42, 0.95) 0%, rgba(0, 0, 0, 0.98) 100%);
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 100;
            backdrop-filter: blur(10px);
        }

        .gameOverScreen h2 {
            font-size: 4rem;
            margin-bottom: 20px;
            background: linear-gradient(90deg, #ef4444, #f97316);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 5px 20px rgba(239, 68, 68, 0.3);
        }

        .gameOverScreen p {
            font-size: 1.8rem;
            margin-bottom: 15px;
            color: #e2e8f0;
        }

        .finalStats {
            background: rgba(30, 41, 59, 0.7);
            padding: 25px;
            border-radius: 20px;
            margin: 30px 0;
            border: 1px solid rgba(100, 116, 139, 0.3);
        }

        .statRow {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid rgba(100, 116, 139, 0.2);
        }

        .statRow:last-child {
            border-bottom: none;
        }

        /* Performance Gauge */
        .performance-gauge {
            position: fixed;
            bottom: 200px;
            right: 20px;
            width: 200px;
            background: rgba(15, 23, 42, 0.9);
            padding: 15px;
            border-radius: 15px;
            display: none;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(100, 116, 139, 0.3);
        }

        .gauge-meter {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }

        .gauge-fill {
            height: 100%;
            background: linear-gradient(90deg, #10b981, #f59e0b, #ef4444);
            border-radius: 4px;
            width: 70%;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .brand-title { font-size: 2.5rem; }
            .brand-logo { font-size: 4rem; }
            .game-features { grid-template-columns: 1fr; }
            .gameHUD { flex-wrap: wrap; gap: 15px; }
            .controlsContainer { max-width: 100%; }
            .arrowButton, .pedalButton { width: 70px; height: 70px; }
        }

        @media (max-width: 480px) {
            .brand-title { font-size: 2rem; }
            .gameButton { padding: 15px 30px; }
            .carInfo, .performance-gauge { display: none !important; }
            .arrowButton, .pedalButton { width: 60px; height: 60px; font-size: 2rem; }
        }
    </style>
</head>
<body>
    <!-- Background Effects -->
    <div class="galaxy-bg"></div>
    <div class="stars"></div>

    <!-- Start Screen -->
    <div id="gameStartScreen">
        <div class="game-brand">
            <div class="brand-logo">üèéÔ∏è</div>
            <div class="brand-title">VelocityX Pro</div>
            <div class="brand-subtitle">Ultimate Racing Experience</div>
        </div>

        <div class="creator-badge">
            <span><i class="fas fa-code"></i> Crafted by Shreyash Vaibhav Patil</span>
        </div>

        <div class="game-description">
            Experience the next generation of racing! Dodge dynamic traffic, 
            manage advanced vehicle systems, and climb through challenging levels 
            in this hyper-realistic racing simulation.
        </div>

        <div class="game-features">
            <div class="feature">
                <i class="fas fa-tachometer-alt"></i>
                <h4>Real Physics</h4>
                <p>Advanced vehicle dynamics</p>
            </div>
            <div class="feature">
                <i class="fas fa-layer-group"></i>
                <h4>3D Effects</h4>
                <p>Immersive visual experience</p>
            </div>
            <div class="feature">
                <i class="fas fa-traffic-light"></i>
                <h4>Smart AI</h4>
                <p>Dynamic traffic system</p>
            </div>
            <div class="feature">
                <i class="fas fa-chart-line"></i>
                <h4>Progression</h4>
                <p>Level-based challenges</p>
            </div>
        </div>

        <button class="gameButton" onclick="startGame()">
            <i class="fas fa-play-circle"></i> IGNITE ENGINE
        </button>

        <div style="margin-top: 40px; color: #64748b; font-size: 0.9rem;">
            <p><i class="fas fa-gamepad"></i> Use ARROWS to steer ‚Ä¢ GAS/BRAKE pedals ‚Ä¢ Dodge traffic for score</p>
        </div>
    </div>

    <!-- Game Container -->
    <div class="game-container">
        <div class="road-perspective"></div>
        <canvas id="gameCanvas" width="400" height="650"></canvas>
    </div>

    <!-- Game HUD -->
    <div class="gameHUD" id="gameHUD">
        <div class="hudSection">
            <div class="hudIcon"><i class="fas fa-tachometer-alt"></i></div>
            <div class="hudLabel">Velocity</div>
            <div class="hudValue"><span id="speedValue">0</span> KM/H</div>
        </div>
        <div class="hudSection">
            <div class="hudIcon"><i class="fas fa-flag-checkered"></i></div>
            <div class="hudLabel">Stage</div>
            <div class="hudValue"><span id="levelValue">1</span></div>
        </div>
        <div class="hudSection">
            <div class="hudIcon"><i class="fas fa-trophy"></i></div>
            <div class="hudLabel">Score</div>
            <div class="hudValue"><span id="scoreValue">0</span></div>
        </div>
        <div class="hudSection">
            <div class="hudIcon"><i class="fas fa-gas-pump"></i></div>
            <div class="fuel-container">
                <div class="hudLabel">Nitro Fuel</div>
                <div class="hudValue" id="fuelValue">100%</div>
                <div id="fuelBarContainer">
                    <div id="fuelBar"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Car Info Panel -->
    <div class="carInfo" id="carInfo">
        <h3><i class="fas fa-car"></i> VELOCITY X-9000</h3>
        <div class="carSpec">
            <span>Engine:</span>
            <span>V12 TWIN-TURBO</span>
        </div>
        <div class="carSpec">
            <span>Power:</span>
            <span>950 HP</span>
        </div>
        <div class="carSpec">
            <span>Lane:</span>
            <span id="currentLane">2</span>/3
        </div>
        <div class="carSpec">
            <span>Gear:</span>
            <span id="currentGear">D</span>
        </div>
        <div class="carSpec">
            <span>Mode:</span>
            <span id="driveMode">SPORT</span>
        </div>
    </div>

    <!-- Performance Gauge -->
    <div class="performance-gauge" id="performanceGauge">
        <h4><i class="fas fa-chart-bar"></i> Performance</h4>
        <div>Throttle: <span id="throttleValue">0%</span></div>
        <div class="gauge-meter">
            <div class="gauge-fill" id="throttleGauge"></div>
        </div>
        <div>RPM: <span id="rpmValue">0</span></div>
        <div class="gauge-meter">
            <div class="gauge-fill" id="rpmGauge"></div>
        </div>
    </div>

    <!-- Level Up Notification -->
    <div class="levelUpNotification" id="levelUpNotification">
        <h2><i class="fas fa-rocket"></i> STAGE CLEARED!</h2>
        <p>Advanced to <span id="newLevelText">Stage 2</span></p>
        <p style="font-size: 1rem; margin-top: 20px; color: #feca57;">
            <i class="fas fa-exclamation-triangle"></i> Increased difficulty activated
        </p>
        <div style="margin-top: 30px; padding: 15px; background: rgba(30, 41, 59, 0.5); border-radius: 10px;">
            <p style="font-size: 0.9rem; color: #94a3b8;">Unlocked: Enhanced AI Traffic</p>
        </div>
    </div>

    <!-- Game Over Screen -->
    <div class="gameOverScreen" id="gameOverScreen">
        <h2><i class="fas fa-flag-checkered"></i> RACE COMPLETE</h2>
        <p>Your Performance Summary</p>
        
        <div class="finalStats">
            <div class="statRow">
                <span>Final Score:</span>
                <span id="finalScore" style="color: #feca57;">0</span>
            </div>
            <div class="statRow">
                <span>Stage Reached:</span>
                <span id="finalLevel" style="color: #48dbfb;">1</span>
            </div>
            <div class="statRow">
                <span>Cars Dodged:</span>
                <span id="finalCars" style="color: #ff9ff3;">0</span>
            </div>
            <div class="statRow">
                <span>Top Speed:</span>
                <span id="finalSpeed" style="color: #feca57;">0 KM/H</span>
            </div>
            <div class="statRow">
                <span>Game Time:</span>
                <span id="finalTime" style="color: #10b981;">00:00</span>
            </div>
        </div>

        <button class="gameButton" onclick="location.reload()">
            <i class="fas fa-redo"></i> NEW RACE
        </button>
        
        <div style="margin-top: 30px; color: #64748b; font-size: 0.9rem;">
            <p><i class="fas fa-code"></i> VelocityX Pro Racing Engine ‚Ä¢ Developed by Shreyash Vaibhav Patil</p>
        </div>
    </div>

    <!-- Controls -->
    <div class="controlsContainer" id="controlsContainer">
        <div class="pedalButton" id="brakePedal" 
             ontouchstart="applyBrake()" ontouchend="releaseBrake()" 
             onmousedown="applyBrake()" onmouseup="releaseBrake()">
            <i class="fas fa-hand-paper"></i>
        </div>
        
        <div class="arrowButtons">
            <div class="arrowButton" 
                 ontouchstart="moveLeft()" ontouchend="clearMove()" 
                 onmousedown="moveLeft()" onmouseup="clearMove()">
                <i class="fas fa-arrow-left"></i>
            </div>
            <div class="arrowButton" 
                 ontouchstart="moveRight()" ontouchend="clearMove()" 
                 onmousedown="moveRight()" onmouseup="clearMove()">
                <i class="fas fa-arrow-right"></i>
            </div>
        </div>
        
        <div class="pedalButton" id="gasPedal" 
             ontouchstart="applyGas()" ontouchend="releaseGas()" 
             onmousedown="applyGas()" onmouseup="releaseGas()">
            <i class="fas fa-bolt"></i>
        </div>
    </div>

    <!-- Audio -->
    <audio id="engineSound" loop>
        <source src="https://assets.mixkit.co/music/preview/mixkit-racing-game-988.mp3" type="audio/mpeg">
    </audio>
    <audio id="collisionSound">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-car-collision-debris-1562.mp3" type="audio/mpeg">
    </audio>
    <audio id="fuelSound">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3" type="audio/mpeg">
    </audio>
    <audio id="levelUpSound">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3" type="audio/mpeg">
    </audio>
    <audio id="gearShiftSound">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-gear-shift-in-car-1136.mp3" type="audio/mpeg">
    </audio>

    <script>
        // Enhanced Game Variables
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        let gameRunning = false;
        let gameLoopId;
        let gameStartTime;
        let gear = 1;
        let rpm = 0;
        
        // Enhanced Player Car
        const playerCar = {
            x: 180,
            y: 500,
            width: 45,
            height: 90,
            speed: 5,
            maxSpeed: 25,
            acceleration: 0.25,
            deceleration: 0.15,
            lane: 2,
            fuel: 100,
            fuelConsumption: 0.025,
            score: 0,
            level: 1,
            carsPassed: 0,
            color: '#ef4444',
            topSpeed: 0,
            isBoosting: false,
            boostFuel: 100
        };
        
        // Enhanced Traffic and Items
        let trafficCars = [];
        let fuelCans = [];
        let roadY = 0;
        let particles = [];
        
        // Controls State
        let keys = {
            left: false,
            right: false,
            gas: false,
            brake: false,
            boost: false
        };
        
        // Enhanced Lane Positions
        const lanePositions = [70, 180, 290];
        
        // Start Game Function
        function startGame() {
            document.getElementById('gameStartScreen').style.display = 'none';
            document.querySelector('.game-container').style.display = 'block';
            document.getElementById('gameHUD').style.display = 'flex';
            document.getElementById('controlsContainer').style.display = 'flex';
            document.getElementById('carInfo').style.display = 'block';
            document.getElementById('performanceGauge').style.display = 'block';
            
            // Start engine sound
            const engineSound = document.getElementById('engineSound');
            engineSound.volume = 0.5;
            engineSound.play().catch(e => console.log("Audio:", e));
            
            gameRunning = true;
            gameStartTime = Date.now();
            
            // Enhanced game loops
            setInterval(addTrafficCar, 1000 - (playerCar.level * 100));
            setInterval(addFuelCan, 7000);
            setInterval(updateFuel, 100);
            setInterval(updateGear, 500);
            
            // Start main game loop
            gameLoopId = requestAnimationFrame(gameLoop);
        }
        
        // Add Enhanced Traffic Car
        function addTrafficCar() {
            if (!gameRunning) return;
            
            const lane = Math.floor(Math.random() * 3) + 1;
            const carTypes = [
                { color: '#3b82f6', width: 45, height: 90, speed: 4 + playerCar.level * 0.7 },
                { color: '#10b981', width: 50, height: 100, speed: 3.5 + playerCar.level * 0.6 },
                { color: '#8b5cf6', width: 40, height: 85, speed: 5 + playerCar.level * 0.8 },
                { color: '#f59e0b', width: 55, height: 110, speed: 3 + playerCar.level * 0.5 }
            ];
            
            const type = carTypes[Math.floor(Math.random() * carTypes.length)];
            const isSpecial = Math.random() > 0.8;
            
            trafficCars.push({
                x: lanePositions[lane - 1],
                y: -150,
                width: type.width,
                height: type.height,
                color: type.color,
                speed: type.speed,
                lane: lane,
                isSpecial: isSpecial,
                specialColor: isSpecial ? '#f97316' : null
            });
        }
        
        // Add Enhanced Fuel Can
        function addFuelCan() {
            if (!gameRunning || playerCar.fuel > 80) return;
            
            const lane = Math.floor(Math.random() * 3) + 1;
            const isNitro = Math.random() > 0.7;
            
            fuelCans.push({
                x: lanePositions[lane - 1],
                y: -80,
                width: 30,
                height: 50,
                collected: false,
                type: isNitro ? 'nitro' : 'fuel',
                value: isNitro ? 50 : 30
            });
        }
        
        // Update Gear System
        function updateGear() {
            if (!gameRunning) return;
            
            const speed = playerCar.speed;
            let newGear = 1;
            
            if (speed > 20) newGear = 5;
            else if (speed > 15) newGear = 4;
            else if (speed > 10) newGear = 3;
            else if (speed > 5) newGear = 2;
            
            if (newGear !== gear) {
                gear = newGear;
                document.getElementById('currentGear').textContent = gear;
                document.getElementById('gearShiftSound').play().catch(e => console.log("Audio:", e));
            }
            
            // Update RPM
            rpm = Math.min(8000, Math.floor((playerCar.speed / playerCar.maxSpeed) * 8000));
            document.getElementById('rpmValue').textContent = rpm;
            document.getElementById('rpmGauge').style.width = (rpm / 8000 * 100) + '%';
            
            // Update throttle
            const throttle = keys.gas ? 100 : keys.brake ? 0 : 50;
            document.getElementById('throttleValue').textContent = throttle + '%';
            document.getElementById('throttleGauge').style.width = throttle + '%';
        }
        
        // Update Fuel System
        function updateFuel() {
            if (!gameRunning) return;
            
            let consumption = playerCar.fuelConsumption;
            if (keys.gas) consumption *= 1.8;
            if (playerCar.isBoosting) consumption *= 2.5;
            
            playerCar.fuel -= consumption;
            playerCar.fuel = Math.max(0, Math.min(100, playerCar.fuel));
            
            // Update displays
            document.getElementById('fuelValue').textContent = Math.floor(playerCar.fuel) + '%';
            document.getElementById('fuelBar').style.width = playerCar.fuel + '%';
            
            // Update fuel bar color
            const fuelBar = document.getElementById('fuelBar');
            if (playerCar.fuel > 60) {
                fuelBar.style.background = 'linear-gradient(90deg, #10b981, #22c55e)';
            } else if (playerCar.fuel > 30) {
                fuelBar.style.background = 'linear-gradient(90deg, #f59e0b, #f97316)';
            } else {
                fuelBar.style.background = 'linear-gradient(90deg, #ef4444, #dc2626)';
                if (playerCar.fuel < 10 && Math.random() > 0.7) {
                    createParticles(playerCar.x + 20, playerCar.y + playerCar.height, 3);
                }
            }
            
            // Check for game over
            if (playerCar.fuel <= 0 && playerCar.speed < 3) {
                gameOver("Fuel Depleted");
            }
        }
        
        // Create Particles for Effects
        function createParticles(x, y, count) {
            for (let i = 0; i < count; i++) {
                particles.push({
                    x: x,
                    y: y,
                    size: Math.random() * 4 + 2,
                    speedX: (Math.random() - 0.5) * 4,
                    speedY: Math.random() * 3 + 2,
                    color: '#f59e0b',
                    life: 30
                });
            }
        }
        
        // Draw Enhanced Road with 3D Effect
        function drawRoad() {
            // Road surface with gradient
            const roadGradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
            roadGradient.addColorStop(0, '#1e293b');
            roadGradient.addColorStop(0.5, '#334155');
            roadGradient.addColorStop(1, '#0f172a');
            ctx.fillStyle = roadGradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // 3D Road markings with perspective
            ctx.strokeStyle = '#f1f5f9';
            ctx.lineWidth = 4;
            ctx.setLineDash([40, 30]);
            
            for (let i = 0; i < 5; i++) {
                const y = (roadY + i * 80) % 400;
                const scale = 1 - y / 400;
                const width = 20 * scale;
                
                ctx.beginPath();
                ctx.moveTo(canvas.width/2 - width/2, y);
                ctx.lineTo(canvas.width/2 + width/2, y);
                ctx.stroke();
            }
            
            // Lane markings
            ctx.setLineDash([]);
            ctx.strokeStyle = '#475569';
            ctx.lineWidth = 2;
            
            ctx.beginPath();
            ctx.moveTo(130, 0);
            ctx.lineTo(130, canvas.height);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(270, 0);
            ctx.lineTo(270, canvas.height);
            ctx.stroke();
            
            // Road shoulder
            ctx.fillStyle = '#1e293b';
            ctx.fillRect(0, 0, 100, canvas.height);
            ctx.fillRect(300, 0, 100, canvas.height);
            
            // Animate road
            roadY += playerCar.speed;
            if (roadY > 80) roadY = 0;
        }
        
        // Draw Enhanced Player Car with 3D Effects
        function drawPlayerCar() {
            // Car body with gradient
            const carGradient = ctx.createLinearGradient(
                playerCar.x, playerCar.y,
                playerCar.x, playerCar.y + playerCar.height
            );
            carGradient.addColorStop(0, playerCar.color);
            carGradient.addColorStop(1, '#b91c1c');
            
            ctx.fillStyle = carGradient;
            ctx.fillRect(playerCar.x, playerCar.y, playerCar.width, playerCar.height);
            
            // 3D effect - highlights and shadows
            ctx.fillStyle = 'rgba(255, 255, 255, 0.2)';
            ctx.fillRect(playerCar.x + 5, playerCar.y + 5, playerCar.width - 10, 15);
            
            ctx.fillStyle = 'rgba(0, 0, 0, 0.3)';
            ctx.fillRect(playerCar.x, playerCar.y + playerCar.height - 5, playerCar.width, 5);
            
            // Windows
            ctx.fillStyle = '#1e293b';
            ctx.fillRect(playerCar.x + 8, playerCar.y + 12, playerCar.width - 16, 10);
            
            // Wheels
            ctx.fillStyle = '#0f172a';
            ctx.fillRect(playerCar.x + 5, playerCar.y + playerCar.height - 15, 12, 12);
            ctx.fillRect(playerCar.x + playerCar.width - 17, playerCar.y + playerCar.height - 15, 12, 12);
            
            // Headlights with glow effect
            ctx.fillStyle = '#f1f5f9';
            ctx.beginPath();
            ctx.arc(playerCar.x + 8, playerCar.y + 8, 4, 0, Math.PI * 2);
            ctx.arc(playerCar.x + playerCar.width - 8, playerCar.y + 8, 4, 0, Math.PI * 2);
            ctx.fill();
            
            // Glow effect
            ctx.shadowColor = '#f1f5f9';
            ctx.shadowBlur = 10;
            ctx.fill();
            ctx.shadowBlur = 0;
            
            // Branding
            ctx.fillStyle = '#f1f5f9';
            ctx.font = 'bold 11px Arial';
            ctx.fillText('VELOCITY X', playerCar.x + 12, playerCar.y + 28);
            ctx.font = 'bold 9px Arial';
            ctx.fillText('9000', playerCar.x + 18, playerCar.y + 40);
            
            // Boost effect
            if (playerCar.isBoosting) {
                ctx.fillStyle = '#06b6d4';
                ctx.fillRect(playerCar.x + 15, playerCar.y - 10, playerCar.width - 30, 10);
            }
        }
        
        // Draw Enhanced Traffic Cars
        function drawTrafficCars() {
            trafficCars.forEach(car => {
                car.y += car.speed;
                
                // Special car effect
                if (car.isSpecial) {
                    ctx.fillStyle = car.specialColor;
                    ctx.shadowColor = car.specialColor;
                    ctx.shadowBlur = 15;
                } else {
                    ctx.fillStyle = car.color;
                }
                
                ctx.fillRect(car.x, car.y, car.width, car.height);
                ctx.shadowBlur = 0;
                
                // Car details
                ctx.fillStyle = '#1e293b';
                ctx.fillRect(car.x + 5, car.y + 10, car.width - 10, 15);
                ctx.fillStyle = '#0f172a';
                ctx.fillRect(car.x + 8, car.y + car.height - 15, 10, 10);
                ctx.fillRect(car.x + car.width - 18, car.y + car.height - 15, 10, 10);
                
                // Check if car passed
                if (car.y > canvas.height) {
                    playerCar.carsPassed++;
                    playerCar.score += car.isSpecial ? 25 : 10;
                    
                    if (playerCar.carsPassed >= 50 && playerCar.level === 1) {
                        levelUp();
                    }
                    
                    trafficCars = trafficCars.filter(c => c !== car);
                }
                
                // Check collision
                if (detectCollision(playerCar, car)) {
                    document.getElementById('collisionSound').play().catch(e => console.log("Audio:", e));
                    createParticles(car.x + car.width/2, car.y + car.height/2, 20);
                    gameOver("Collision!");
                }
            });
            
            trafficCars = trafficCars.filter(car => car.y < canvas.height + 100);
        }
        
        // Draw Enhanced Fuel Cans
        function drawFuelCans() {
            fuelCans.forEach(can => {
                can.y += playerCar.speed * 0.7;
                
                // Draw can based on type
                if (can.type === 'nitro') {
                    ctx.fillStyle = '#06b6d4';
                    ctx.shadowColor = '#06b6d4';
                    ctx.shadowBlur = 10;
                } else {
                    ctx.fillStyle = '#f59e0b';
                }
                
                ctx.fillRect(can.x, can.y, can.width, can.height);
                ctx.shadowBlur = 0;
                
                // Can details
                ctx.fillStyle = can.type === 'nitro' ? '#0c4a6e' : '#b45309';
                ctx.fillRect(can.x + 5, can.y + 5, can.width - 10, 12);
                ctx.fillRect(can.x + 8, can.y + 25, can.width - 16, 20);
                
                // Symbol
                ctx.fillStyle = '#ffffff';
                ctx.font = 'bold 14px Arial';
                ctx.fillText(can.type === 'nitro' ? '‚ö°' : '‚õΩ', can.x + 11, can.y + 40);
                
                // Check collection
                if (!can.collected && detectCollision(playerCar, can)) {
                    can.collected = true;
                    playerCar.fuel = Math.min(100, playerCar.fuel + can.value);
                    playerCar.score += can.type === 'nitro' ? 100 : 50;
                    
                    document.getElementById('fuelSound').play().catch(e => console.log("Audio:", e));
                    createParticles(can.x + can.width/2, can.y + can.height/2, 15);
                    fuelCans = fuelCans.filter(c => c !== can);
                }
                
                if (can.y > canvas.height) {
                    fuelCans = fuelCans.filter(c => c !== can);
                }
            });
        }
        
        // Draw Particles
        function drawParticles() {
            particles.forEach((particle, index) => {
                particle.x += particle.speedX;
                particle.y += particle.speedY;
                particle.life--;
                
                ctx.fillStyle = particle.color;
                ctx.globalAlpha = particle.life / 30;
                ctx.beginPath();
                ctx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);
                ctx.fill();
                ctx.globalAlpha = 1;
                
                if (particle.life <= 0) {
                    particles.splice(index, 1);
                }
            });
        }
        
        // Collision Detection
        function detectCollision(obj1, obj2) {
            return obj1.x < obj2.x + obj2.width &&
                   obj1.x + obj1.width > obj2.x &&
                   obj1.y < obj2.y + obj2.height &&
                   obj1.y + obj1.height > obj2.y;
        }
        
        // Level Up Function
        function levelUp() {
            playerCar.level = 2;
            playerCar.maxSpeed = 30;
            
            // Update displays
            document.getElementById('levelValue').textContent = playerCar.level;
            document.getElementById('newLevelText').textContent = 'Stage ' + playerCar.level;
            document.getElementById('driveMode').textContent = 'PRO';
            
            // Show notification
            const notification = document.getElementById('levelUpNotification');
            notification.style.display = 'block';
            
            // Play sound
            document.getElementById('levelUpSound').play().catch(e => console.log("Audio:", e));
            
            // Hide notification
            setTimeout(() => {
                notification.style.display = 'none';
            }, 4000);
        }
        
        // Game Over Function
        function gameOver(reason) {
            gameRunning = false;
            
            // Stop engine sound
            document.getElementById('engineSound').pause();
            
            // Calculate game time
            const gameTime = Date.now() - gameStartTime;
            const minutes = Math.floor(gameTime / 60000);
            const seconds = Math.floor((gameTime % 60000) / 1000);
            
            // Update final stats
            document.getElementById('finalScore').textContent = playerCar.score;
            document.getElementById('finalLevel').textContent = playerCar.level;
            document.getElementById('finalCars').textContent = playerCar.carsPassed;
            document.getElementById('finalSpeed').textContent = Math.floor(playerCar.topSpeed * 15) + ' KM/H';
            document.getElementById('finalTime').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            // Show game over screen
            document.getElementById('gameOverScreen').style.display = 'flex';
            
            // Cancel game loop
            cancelAnimationFrame(gameLoopId);
        }
        
        // Update HUD
        function updateHUD() {
            const speedKmh = Math.floor(playerCar.speed * 15);
            playerCar.topSpeed = Math.max(playerCar.topSpeed, playerCar.speed);
            
            document.getElementById('speedValue').textContent = speedKmh;
            document.getElementById('scoreValue').textContent = playerCar.score;
            document.getElementById('levelValue').textContent = playerCar.level;
            document.getElementById('currentLane').textContent = playerCar.lane;
        }
        
        // Control Functions
        function moveLeft() {
            keys.left = true;
        }
        
        function moveRight() {
            keys.right = true;
        }
        
        function clearMove() {
            keys.left = false;
            keys.right = false;
        }
        
        function applyGas() {
            keys.gas = true;
            document.getElementById('gasPedal').style.transform = 'translateY(10px)';
            document.getElementById('gasPedal').style.boxShadow = '0 0 0 #0f172a, 0 5px 15px rgba(0, 0, 0, 0.5)';
        }
        
        function releaseGas() {
            keys.gas = false;
            document.getElementById('gasPedal').style.transform = '';
            document.getElementById('gasPedal').style.boxShadow = '0 10px 0 #0f172a, 0 20px 30px rgba(0, 0, 0, 0.6)';
        }
        
        function applyBrake() {
            keys.brake = true;
            document.getElementById('brakePedal').style.transform = 'translateY(10px)';
            document.getElementById('brakePedal').style.boxShadow = '0 0 0 #0f172a, 0 5px 15px rgba(0, 0, 0, 0.5)';
        }
        
        function releaseBrake() {
            keys.brake = false;
            document.getElementById('brakePedal').style.transform = '';
            document.getElementById('brakePedal').style.boxShadow = '0 10px 0 #0f172a, 0 20px 30px rgba(0, 0, 0, 0.6)';
        }
        
        // Keyboard Controls
        document.addEventListener('keydown', (e) => {
            if (!gameRunning) return;
            
            switch(e.key.toLowerCase()) {
                case 'arrowleft':
                case 'a':
                    keys.left = true;
                    break;
                case 'arrowright':
                case 'd':
                    keys.right = true;
                    break;
                case 'arrowup':
                case 'w':
                    keys.gas = true;
                    break;
                case 'arrowdown':
                case 's':
                    keys.brake = true;
                    break;
                case ' ':
                    keys.boost = true;
                    playerCar.isBoosting = true;
                    break;
            }
        });
        
        document.addEventListener('keyup', (e) => {
            switch(e.key.toLowerCase()) {
                case 'arrowleft':
                case 'a':
                    keys.left = false;
                    break;
                case 'arrowright':
                case 'd':
                    keys.right = false;
                    break;
                case 'arrowup':
                case 'w':
                    keys.gas = false;
                    break;
                case 'arrowdown':
                case 's':
                    keys.brake = false;
                    break;
                case ' ':
                    keys.boost = false;
                    playerCar.isBoosting = false;
                    break;
            }
        });
        
        // Touch device optimization
        document.addEventListener('touchstart', (e) => {
            e.preventDefault();
        }, { passive: false });
        
        // Main Game Loop
        function gameLoop() {
            if (!gameRunning) return;
            
            // Apply controls
            if (keys.left && playerCar.x > 20) {
                playerCar.x -= 10;
                playerCar.lane = playerCar.x < 130 ? 1 : playerCar.x < 230 ? 2 : 3;
            }
            
            if (keys.right && playerCar.x < canvas.width - playerCar.width - 20) {
                playerCar.x += 10;
                playerCar.lane = playerCar.x < 130 ? 1 : playerCar.x < 230 ? 2 : 3;
            }
            
            // Apply physics
            if (keys.gas && playerCar.fuel > 0) {
                const acceleration = playerCar.isBoosting ? 
                    playerCar.acceleration * 1.5 : playerCar.acceleration;
                playerCar.speed = Math.min(playerCar.maxSpeed, playerCar.speed + acceleration);
            } else {
                playerCar.speed = Math.max(3, playerCar.speed - playerCar.deceleration);
            }
            
            if (keys.brake) {
                playerCar.speed = Math.max(2, playerCar.speed - playerCar.acceleration * 2.5);
            }
            
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw game elements
            drawRoad();
            drawTrafficCars();
            drawFuelCans();
            drawParticles();
            drawPlayerCar();
            
            // Update displays
            updateHUD();
            
            // Continue game loop
            gameLoopId = requestAnimationFrame(gameLoop);
        }
        
        // Initialize
        updateHUD();
    </script>
</body>
</html>